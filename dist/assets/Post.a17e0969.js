import{_,o as n,c as a,a as o,t as p,i as m,m as C,f as A,F as y,j as z,w as g,p as U,e as N,d as f,r as V,h,v,b as c,k as L,l as $,q as S,n as T,T as M,s as I,G as j,C as E}from"./index.a68fb71d.js";import{C as D}from"./container.48eafde8.js";const H={name:"DeleteIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},B=["aria-hidden","aria-label"],q=["fill","width","height"],R={d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"},F={key:0};function O(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon delete-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",R,[t.title?(n(),a("title",F,p(t.title),1)):m("",!0)])],8,q))],16,B)}var P=_(H,[["render",O]]);const Z={name:"EyeOutlineIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},K=["aria-hidden","aria-label"],J=["fill","width","height"],Y={d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},G={key:0};function X(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-outline-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",Y,[t.title?(n(),a("title",G,p(t.title),1)):m("",!0)])],8,J))],16,K)}var W=_(Z,[["render",X]]);const Q={name:"EyeOffOutlineIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},x=["aria-hidden","aria-label"],ee=["fill","width","height"],te={d:"M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z"},se={key:0};function ie(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-off-outline-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",te,[t.title?(n(),a("title",se,p(t.title),1)):m("",!0)])],8,ee))],16,x)}var oe=_(Q,[["render",ie]]);const ne={name:"SendIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ae=["aria-hidden","aria-label"],le=["fill","width","height"],re={d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},de={key:0};function ue(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon send-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",re,[t.title?(n(),a("title",de,p(t.title),1)):m("",!0)])],8,le))],16,ae)}var pe=_(ne,[["render",ue]]);const me={name:"CursorDefaultIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ce=["aria-hidden","aria-label"],he=["fill","width","height"],ge={d:"M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"},fe={key:0};function _e(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon cursor-default-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",ge,[t.title?(n(),a("title",fe,p(t.title),1)):m("",!0)])],8,he))],16,ce)}var ve=_(me,[["render",_e]]);const ye={name:"CursorMoveIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},be=["aria-hidden","aria-label"],Ce=["fill","width","height"],ke={d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"},we={key:0};function $e(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon cursor-move-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",ke,[t.title?(n(),a("title",we,p(t.title),1)):m("",!0)])],8,Ce))],16,be)}var Se=_(ye,[["render",$e]]);const Le={name:"CloseIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Me=["aria-hidden","aria-label"],ze=["fill","width","height"],Te={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},Ie={key:0};function Ee(s,e,t,d,i,l){return n(),a("span",C({"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon close-icon",role:"img"},s.$attrs,{onClick:e[0]||(e[0]=r=>s.$emit("click",r))}),[(n(),a("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[o("path",Te,[t.title?(n(),a("title",Ie,p(t.title),1)):m("",!0)])],8,ze))],16,Me)}var De=_(Le,[["render",Ee]]);const Pe={name:"annotation",props:{type:{type:String,default:"annotation"},state:{type:String,default:"view"},title:{type:String,default:"Jikens Co Childrens Chair"},user:{type:String,default:"Jikens Jikens"},personal_comments:{type:String,default:"This chair is magnificelty comfortable, i'm 76 years old and it makes me feel like im 6 again, why are you reading this? \u{1F605}"},url:{type:String,default:null}},emits:["update:title","update:personal_comments","update:url"],methods:{preventInput(s,e=140){s.keyCode===13&&s.preventDefault(),s.target.innerText.length==e&&s.keyCode!=8&&s.preventDefault()},processPaste(s){s.preventDefault();const e=s.clipboardData?(s.originalEvent||s).clipboardData.getData("text/plain"):window.clipboardData?window.clipboardData.getData("Text"):"";if(document.queryCommandSupported("insertText"))document.execCommand("insertText",!1,e);else{const t=document.getSelection().getRangeAt(0);t.deleteContents();const d=document.createTextNode(e);t.insertNode(d),t.selectNodeContents(d),t.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(t)}}}},k=s=>(U("data-v-4936be34"),s=s(),N(),s),Ae={class:"sidebar"},Ue=k(()=>o("img",{src:"",alt:""},null,-1)),Ne={class:"item-detail"},Ve=["contenteditable"],je=k(()=>o("a",{href:"#"},"Curate item",-1)),He=k(()=>o("br",null,null,-1)),Be=k(()=>o("small",null,[o("b",null,"Add this item to the global catalogue"),f(" Allow others to... "),o("br"),f(" \u2705 Embed it in their setups if they have the same product "),o("br"),f(" \u2705 Edit details of the product. ")],-1)),qe=f("More information"),Re=["contenteditable"],Fe=k(()=>o("h5",null,"Discussion",-1)),Oe=k(()=>o("div",{class:"discussions mini"},null,-1));function Ze(s,e,t,d,i,l){const r=A("RouterLink");return n(),a("aside",Ae,[t.type=="annotation"?(n(),a(y,{key:0},[Ue,o("section",Ne,[o("h4",{class:"input",placeholder:"Item name",contenteditable:t.state=="create",onInput:e[0]||(e[0]=u=>s.$emit("update:title",u.target.innerText)),onKeydown:e[1]||(e[1]=u=>l.preventInput(u,30)),onPaste:e[2]||(e[2]=(...u)=>l.processPaste&&l.processPaste(...u))},p(t.title),41,Ve),o("p",null,[t.state=="create"&&t.url==null?(n(),a(y,{key:0},[je,He,Be],64)):m("",!0),t.url!=null?(n(),z(r,{key:1,to:"/"},{default:g(()=>[qe]),_:1})):m("",!0)]),o("h5",null,p(t.user)+"'s notes",1),o("p",{class:"input",placeholder:"Say what ever you want about this item",contenteditable:t.state=="create",onInput:e[3]||(e[3]=u=>s.$emit("update:personal_comments",u.target.innerText)),onKeydown:e[4]||(e[4]=u=>l.preventInput(u,140)),onPaste:e[5]||(e[5]=(...u)=>l.processPaste&&l.processPaste(...u))},p(t.personal_comments),41,Re),Fe,Oe])],64)):m("",!0)])}var Ke=_(Pe,[["render",Ze],["__scopeId","data-v-4936be34"]]);const Je={name:"Alert",props:{title:String,msg:String},methods:{dismiss(){let s=document.querySelector(".alert-bg");s.classList.add("exitOut");function e(){s.classList.toggle("activated"),s.classList.remove("exitOut"),s.addEventListener("transitionend",e,!0)}s.addEventListener("transitionend",e,!1)}}},Ye={class:"alert-bg"},Ge={class:"alert-modal"},Xe={class:"modal-text"},We={class:"button-area"},Qe={class:"slot"},xe={class:"hover-fx dark"};function et(s,e,t,d,i,l){return n(),a("div",Ye,[o("div",Ge,[o("div",Xe,[o("h3",null,p(t.title),1),o("p",null,p(t.msg),1)]),o("div",We,[o("div",Qe,[V(s.$slots,"default",{},void 0,!0)]),o("div",xe,[o("a",{onClick:e[0]||(e[0]=(...r)=>l.dismiss&&l.dismiss(...r))},"Cancel")])])]),o("div",{class:"void",onClick:e[1]||(e[1]=(...r)=>l.dismiss&&l.dismiss(...r))})])}var tt=_(Je,[["render",et],["__scopeId","data-v-8e57cf2a"]]);const b=s=>(U("data-v-e1554dde"),s=s(),N(),s),st={class:"post-main"},it={class:"post"},ot={class:"overlay"},nt={class:"top"},at={class:"breadcrumbs"},lt=f("Home"),rt=f(" > "),dt={key:0},ut={key:1},pt={id:"hide-title-card",class:"hover-fx"},mt={key:0,href:"#"},ct=f(" Hide"),ht=f(" Show"),gt=f(" title card "),ft={class:"bottom"},_t=["contenteditable"],vt=["onClick"],yt={key:1,class:"img-creation-bar"},bt={class:"toolbar"},Ct={for:"mouse"},kt=b(()=>o("label",{for:"image"},"Image",-1)),wt=b(()=>o("label",{for:"pointer_stamp"},"Add",-1)),$t={for:"pointer_move"},St={class:"toggle-vis-blur"},Lt=b(()=>o("div",{class:"blur-overlay"},null,-1)),Mt=[Lt],zt=["src"],Tt={key:1,class:"img-upload-zone"},It=b(()=>o("h3",null,"Upload image to header",-1)),Et=b(()=>o("p",null,'Click the buttons: "image" > "Choose File"',-1)),Dt=[It,Et],Pt={class:"post_desc"},At=f(' "'),Ut=["contenteditable"],Nt=f('" '),Vt={class:"image-wrapper"},jt=["onClick"],Ht={class:"img-creation-bar"},Bt=["onChange"],qt=["onClick"],Rt=b(()=>o("div",{class:"blur-overlay"},null,-1)),Ft=["src"],Ot={key:1,class:"img-upload-zone"},Zt=b(()=>o("h4",null,"Upload image to header",-1)),Kt=b(()=>o("p",null,'Click the buttons: "image" > "Choose File"',-1)),Jt=[Zt,Kt],Yt=["contenteditable","onInput"],Gt={key:1,class:"add-section"},Xt={props:["currentUser"],data(){return{route:{user:null,date:null},alert:{title:"Uh oh, you've made some unsaved modifications",msg:"Do you want to save these changes, or exit out of the builder?"},uploading:!1,state:"view",editing:!1,stampModeEnabled:"mouse",pointerClicked:{i:null,j:null},showTitleCard:!0,sidebar:{opened:!1,title:"null",data:{user:"Jikens Jikens",personal_comments:"This chair is magnificelty comfortable, i'm 76 years old and it makes me feel like im 6 again, why are you reading this? \u{1F605}"}},img_dims:{rendered:[],natural:[]},post:{user:null,date:null,title:null,description:null,likes:0,images:null}}},computed:{createMode(){let s=!1;return this.state=="create"&&(s=!0),s},checkIfImageExists(){let s=!1;try{s=this.post.images[0].annotations.length>0||this.post.images.length>0}catch{s=!1}return s},pubDate(){var s={weekday:"long",year:"numeric",month:"long",day:"numeric"};if(this.state=="view"){var e=new Date(0);e.setUTCSeconds(this.route.date)}else{var e=new Date;this.post.date=Date.parse(e)/1e3}return e.toLocaleDateString("en-US",s)},multiplier(){let s=Array(this.post.images.length).fill(1);try{for(let e=0;e<this.post.images.length;e++)s[e]=this.img_dims.rendered[e].width/this.img_dims.natural[e].width}catch(e){console.log(`rendered and natural _img_dims hasn't been loaded in yet on first load 
`,e)}return s},p_cords(){let s=[];return this.post.images.forEach((e,t)=>{let d=[];e.annotations.forEach(i=>{console.log("The index:",t),d.push(`transform: translate(${i.x*this.multiplier[t]}px,${i.y*this.multiplier[t]}px)`)}),s.push(d)}),s}},created(){this.route.user=this.$route.params.user,this.route.date=this.$route.params.date,this.$route.name=="create_post"?(document.body.className="post create",this.state="create"):this.state="view",this.state=="view"||this.editing?this.$http.get(`https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/posts/${this.route.user}/${this.route.date}`).then(s=>{this.post=s.data.Item,console.log(s.data)}).catch(s=>{console.log("Unable to get published posts from setUpon api: error...\u{1F62D} "+s)}):(console.log("Creating new post mode"),this.post.images=[{url:"",caption:"",annotations:[]}])},mounted(){setTimeout(()=>{this.scrollToTop()},500);let s=0,e=!1,t=document.querySelector("header .overlay"),d=document.querySelector("header .blur-overlay");const i=u=>{u<50?(t.style.opacity=1,d.style.opacity=1):(t.style.opacity=0,d.style.opacity=0)};document.addEventListener("scroll",u=>{s=window.scrollY,e||(window.requestAnimationFrame(()=>{i(s),e=!1}),e=!0)}),this.state=="create"&&!this.editing&&(this.post.user=this.currentUser.displayName);let l=document.querySelectorAll(".annot-wrapper img");console.log("imagesForAnnotation",l),this.state=="view"&&l.forEach(u=>{u.onload=()=>{setTimeout(()=>{this.push_rendered_img_dims(u)},1e3),this.push_natural_img_dims(u)}});let r;window.addEventListener("resize",u=>{this.post.images.length!=l.length&&(l=document.querySelectorAll(".annot-wrapper img")),clearTimeout(r),r=setTimeout(()=>{console.log("resizing changing this width:",this.img_dims.rendered[0].width);for(let w=0;w<l.length;w++)this.img_dims.rendered[w].width=l[w].width},150)})},beforeCreate:function(){document.body.className="post"},watch:{stampModeEnabled(s,e){let t=document.querySelectorAll(".annot-wrapper");console.log("annotationSpace",t),s=="stamp"||s=="image"?(console.log("turning on stamp mode for pointers"),this.showTitleCard=!1):console.log("turning off stamp mode for pointers")}},methods:{preDeletePost(){this.alert.title="Delete work?",this.alert.msg="You are about to delete a project, are you sure you want to do that, or was this a mis-click?",document.querySelector(".alert-bg").classList.add("activated")},deletePost(){this.currentUser.displayName==this.post.user&&(console.log("Current user is the same as post, deleting post."),this.$http.delete(`https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/posts/${this.route.user}/${this.route.date}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.currentUser.at}`}}).then(s=>{console.log("Deleting post response:",s),this.$router.push({path:"/"})}).catch(s=>{console.log(`Api list:https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/posts/${this.route.user}/${this.route.date}`),console.log("Unable to delete post to api (): error "+s)}))},postPost(){this.$http.put("https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/posts",this.post,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.currentUser.at}`}}).then(s=>{console.log(s.data),console.log("Post posted!"),this.$router.push({name:"home"})}).catch(s=>{console.log("Unable to get published posts from setUpon api: error...\u{1F62D} "+s),console.log("https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/posts",this.currentUser.at),console.error(s)})},initiateImageSpace(s){s.preventDefault(),this.post.images.length<6&&this.post.images.push({url:"",caption:"",annotations:[]})},deletePointer(s){let e=this.pointerClicked.i,t=this.pointerClicked.j;this.post.images[e].annotations.splice(t,1),this.sidebar.opened=!1},addPointer(s,e){let t=s.offsetX,d=s.offsetY;console.log(t,d),this.$nextTick(()=>{t=t/this.multiplier[e],d=d/this.multiplier[e],console.log("Adjusted p coordinates:",t,d,"with multiplier:",this.multiplier);let i={x:t,y:d,item:null,url:null,personal_comments:null};this.post.images[e].annotations.push(i)}),this.stampModeEnabled="mouse"},fileUpload(s,e){this.$http.post("https://omvs9m8wk9.execute-api.us-east-1.amazonaws.com/su-s3",{extension:"jpg",mime:"application/json"},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.currentUser.at}`}}).then(t=>{const d=t.data.uploadUrl;console.log(d),console.log(s.target.files[0]);const i=s.target.files[0];this.$http.put(d,i,{headers:{"Content-Type":"image/jpeg"}}).then(l=>{console.log("S3: Image uploaded through presigned_url",l.data),console.log(d.split("?")[0]),this.post.images[e].url=d.split("?")[0].replace("setupon-s3-bucket.s3.amazonaws.com","d1brkipwoarxuy.cloudfront.net"),this.$nextTick(()=>{let r=document.querySelectorAll(".annot-wrapper img");r[e].onload=()=>{this.push_rendered_img_dims(r[e],e),this.push_natural_img_dims(r[e],e)},this.stampModeEnabled="stamp"})}).catch(l=>{console.log(l)})}).catch(t=>{console.log(t)})},onInput(s,e,t){e!="caption"?this.post[e]=s.target.innerText:(console.log(t),this.post.images[t].caption=s.target.innerText)},preventInput(s,e=140){s.keyCode===13&&s.preventDefault(),s.target.innerText.length==e&&s.keyCode!=8&&s.preventDefault()},processPaste(s){s.preventDefault();const e=s.clipboardData?(s.originalEvent||s).clipboardData.getData("text/plain"):window.clipboardData?window.clipboardData.getData("Text"):"";if(document.queryCommandSupported("insertText"))document.execCommand("insertText",!1,e);else{const t=document.getSelection().getRangeAt(0);t.deleteContents();const d=document.createTextNode(e);t.insertNode(d),t.selectNodeContents(d),t.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(t)}},scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})},openSidebar:function(s,e,t,d,i){switch(this.sidebar.opened=!0,this.pointerClicked={i:t,j:d},s){case"annotation":this.sidebar.data={user:this.post.user};break}},push_natural_img_dims(s,e=null){let t={width:s.naturalWidth};console.log(t),e==null?this.img_dims.natural.push(t):this.img_dims.natural[e]=t},push_rendered_img_dims(s,e=null){let t={width:s.width};console.log(t),e==null?this.img_dims.rendered.push(t):this.img_dims.rendered[e]=t},hideTitleCard(){this.showTitleCard=!this.showTitleCard}}},Wt=Object.assign(Xt,{setup(s){return(e,t)=>{const d=A("RouterLink");return n(),a("div",null,[o("div",st,[o("header",it,[h(o("div",ot,[o("div",nt,[o("p",at,[c(d,{to:"/"},{default:g(()=>[lt]),_:1}),rt,c(d,{to:"/"+e.route.user},{default:g(()=>[e.createMode?(n(),a("span",ut,p(e.post.user),1)):(n(),a("span",dt,p(e.route.user),1))]),_:1},8,["to"]),f(" > "+p(e.post.title),1)]),o("div",pt,[this.currentUser.displayName==this.post.user&&this.state!="create"?(n(),a("a",mt,[c(P,{size:30,onClick:t[0]||(t[0]=i=>e.preDeletePost())})])):m("",!0),o("a",{href:"#",class:"tiny",onClick:t[1]||(t[1]=i=>e.hideTitleCard())},[e.showTitleCard?(n(),a(y,{key:0},[c(W,{size:30}),ct],64)):(n(),a(y,{key:1},[c(oe,{size:30}),ht],64)),gt])])]),h(o("div",ft,[o("h1",{class:"input",placeholder:"My beautiful workspace",contenteditable:e.createMode,onInput:t[2]||(t[2]=i=>e.onInput(i,"title")),onKeydown:t[3]||(t[3]=i=>e.preventInput(i,30)),onPaste:t[4]||(t[4]=(...i)=>e.processPaste&&e.processPaste(...i))},p(e.post.title),41,_t),o("p",null,p(e.pubDate),1)],512),[[v,e.showTitleCard]])],512),[[v,e.stampModeEnabled=="mouse"]]),e.post.images[0].annotations.length>=0?(n(!0),a(y,{key:0},L(e.post.images[0].annotations,(i,l)=>(n(),a("div",{class:"pointer",style:I(e.p_cords[0][l]),onClick:r=>e.openSidebar("annotation",i,0,l)},null,12,vt))),256)):m("",!0),e.state=="create"?(n(),a("div",yt,[h(o("input",{type:"file",accept:"image/jpeg",onChange:t[5]||(t[5]=i=>e.fileUpload(i,0))},null,544),[[v,e.stampModeEnabled=="image"]]),o("div",bt,[h(o("input",{type:"radio",id:"mouse",value:"mouse","onUpdate:modelValue":t[6]||(t[6]=i=>S(stampModeEnabled)?stampModeEnabled.value=i:null)},null,512),[[$,e.stampModeEnabled]]),o("label",Ct,[c(ve)]),h(o("input",{type:"radio",id:"image",value:"image","onUpdate:modelValue":t[7]||(t[7]=i=>S(stampModeEnabled)?stampModeEnabled.value=i:null)},null,512),[[$,e.stampModeEnabled]]),kt,h(o("input",{type:"radio",id:"pointer_stamp",value:"stamp","onUpdate:modelValue":t[8]||(t[8]=i=>S(stampModeEnabled)?stampModeEnabled.value=i:null)},null,512),[[$,e.stampModeEnabled]]),wt,h(o("input",{type:"radio",id:"pointer_move",value:"move","onUpdate:modelValue":t[9]||(t[9]=i=>S(stampModeEnabled)?stampModeEnabled.value=i:null)},null,512),[[$,e.stampModeEnabled]]),o("label",$t,[c(Se)])])])):m("",!0),o("div",{class:T(["annot-wrapper",{add:e.stampModeEnabled=="stamp",move:e.stampModeEnabled=="move"}])},[h(o("div",{class:"annotate-zone",onClick:t[10]||(t[10]=i=>e.addPointer(i,0))},null,512),[[v,e.stampModeEnabled=="stamp"]]),h(o("div",St,Mt,512),[[v,e.showTitleCard]]),e.post.images[0].url!=""?(n(),a("img",{key:0,src:e.post.images[0].url,alt:""},null,8,zt)):(n(),a("div",Tt,Dt))],2)]),o("section",Pt,[c(D,null,{default:g(()=>[o("blockquote",null,[At,o("span",{class:"input",placeholder:"My beautiful workspace",contenteditable:e.createMode,onInput:t[11]||(t[11]=i=>e.onInput(i,"description")),onKeydown:t[12]||(t[12]=i=>e.preventInput(i,230)),onPaste:t[13]||(t[13]=(...i)=>e.processPaste&&e.processPaste(...i))},p(e.post.description),41,Ut),Nt])]),_:1})]),o("article",null,[c(D,null,{default:g(()=>[c(j,{class:"grid-margin-x"},{default:g(()=>[e.post.images.length>0?(n(!0),a(y,{key:0},L(e.post.images.slice(1),(i,l)=>(n(),a(y,null,[c(E,{class:"large-9"},{default:g(()=>[o("div",Vt,[(n(!0),a(y,null,L(i.annotations,(r,u)=>(n(),a("div",{class:"pointer",style:I(e.p_cords[l+1][u]),onClick:w=>e.openSidebar("annotation",r,l+1,u)},null,12,jt))),256)),h(o("div",Ht,[o("input",{type:"file",accept:"image/jpeg",onChange:r=>e.fileUpload(r,l+1)},null,40,Bt)],512),[[v,e.stampModeEnabled=="image"]]),o("div",{class:T(["annot-wrapper",{add:e.stampModeEnabled=="stamp",move:e.stampModeEnabled=="move"}])},[h(o("div",{class:"annotate-zone",onClick:r=>e.addPointer(r,l+1)},null,8,qt),[[v,e.stampModeEnabled=="stamp"]]),Rt,e.post.images[l+1].url!=""?(n(),a("img",{key:0,src:i.url,alt:""},null,8,Ft)):(n(),a("div",Ot,Jt))],2)])]),_:2},1024),c(E,{class:"large-3"},{default:g(()=>[o("p",{class:"caption input",placeholder:"Describe what is in the photo",contenteditable:e.createMode,onInput:r=>e.onInput(r,"caption",l+1),onKeydown:t[14]||(t[14]=r=>e.preventInput(r,230)),onPaste:t[15]||(t[15]=(...r)=>e.processPaste&&e.processPaste(...r))},p(i.caption),41,Yt)]),_:2},1024)],64))),256)):m("",!0),h(o("div",{class:"action-button flat",onClick:t[16]||(t[16]=(...i)=>e.postPost&&e.postPost(...i))},[c(pe,{size:"45"})],512),[[v,e.sidebar.opened==!1&&e.state=="create"]]),e.post.images.length!=5&&e.state=="create"?(n(),a("p",Gt,[o("a",{href:"#",onClick:t[17]||(t[17]=(...i)=>e.initiateImageSpace&&e.initiateImageSpace(...i))}," Add new section "+p(e.post.images.length)+" / 5 ",1)])):m("",!0)]),_:1})]),_:1})]),c(M,{name:"sidebar"},{default:g(()=>[e.sidebar.opened?(n(),z(Ke,{key:0,state:e.state,title:e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].item,"onUpdate:title":t[18]||(t[18]=i=>e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].item=i),user:e.post.user,"onUpdate:user":t[19]||(t[19]=i=>e.post.user=i),personal_comments:e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].personal_comments,"onUpdate:personal_comments":t[20]||(t[20]=i=>e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].personal_comments=i),url:e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].url,"onUpdate:url":t[21]||(t[21]=i=>e.post.images[e.pointerClicked.i].annotations[e.pointerClicked.j].url=i)},null,8,["state","title","user","personal_comments","url"])):m("",!0)]),_:1}),c(M,{name:"scale_in"},{default:g(()=>[e.sidebar.opened?(n(),a("div",{key:0,class:"action-button flat",onClick:t[22]||(t[22]=i=>e.sidebar.opened=!1)},[c(De,{size:"45"})])):m("",!0)]),_:1}),c(M,{name:"scale_in"},{default:g(()=>[e.sidebar.opened&&e.state=="create"?(n(),a("div",{key:0,class:"action-button flat nobg",id:"delete",onClick:t[23]||(t[23]=(...i)=>e.deletePointer&&e.deletePointer(...i))},[e.sidebar.opened?(n(),z(P,{key:0,size:"45"})):m("",!0)])):m("",!0)]),_:1}),c(tt,{title:e.alert.title,msg:e.alert.msg},{default:g(()=>[o("a",{onClick:t[24]||(t[24]=(...i)=>e.deletePost&&e.deletePost(...i)),href:"#",class:"button"},"Delete")]),_:1},8,["title","msg"])])])}}});var es=_(Wt,[["__scopeId","data-v-e1554dde"]]);export{es as default};
